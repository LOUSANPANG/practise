## 字符串函数

```bash
SELECT 函数();

# 字符串函数
CONCAT(str1, str2, ...) # 字符串拼接
LOWER(str) # 转换为小写
UPPER(str) # 转换为大写
LPAD(str, len, padstr) # 左填充
RPAD(str, len, padstr) # 右填充
TRIM(str) # 去除字符串头部和尾部的空格
SUBSTRING(str, start, len) # 返回从start位置开始的len长度的子字符串

# 举例
SELECT CONCAT('hello', 'world'); # hello world
SELECT LOWER('HELLO'); # hello
SELECT UPPER('hello'); # HELLO
SELECT LPAD('hello', 10, '*'); # ***hello
SELECT RPAD('hello', 10, '*'); # hello***
SELECT TRIM('  hello  '); # hello
SELECT SUBSTRING('hello', 2, 3); # ell

# 更新 user 表，工号统一五位数，不足的前边补0
UPDATE user SET work_no = LPAD(work_no, 5, '0');
```


## 数值函数

```bash
# 常见数值函数
CEIL(x) # 向上取整
FLOOR(x) # 向下取整
MOD(x, y) # x/y取余
RAND() # 0-1随机数
ROUND(x, y) # x四舍五入，保留y位小数

SELECT CEIL(3.14); # 4
SELECT FLOOR(3.14); # 3
SELECT MOD(10, 3); # 1
SELECT RAND(); # 0.123456
SELECT ROUND(3.14159, 2); # 3.14

# 生辰一个六位数的随机验证码
SELECT LPAD(ROUND(RAND() * 1000000, 0), 6, '0');
```


## 日期函数

```bash
# 日期函数
CURDATE() # 当前日期
CURTIME() # 当前时间
NOW() # 当前日期时间
YEAR(date) # 日期的年份
MONTH(date) # 日期的月份
DAY(date) # 日期的天
HOUR(time) # 时间的小时
MINUTE(time) # 时间的分钟
SECOND(time) # 时间的秒
DATE_ADD(date, INTERVAL expr type) # 日期增加
DATE_SUB(date, INTERVAL expr type) # 日期减少
DATEDIFF(date1, date2) # 日期天数差值
DATE_FORMAT(date, format) # 日期格式化

# 举例
SELECT CURDATE(); # 2023-08-01
SELECT CURTIME(); # 15:20:00
SELECT NOW(); # 2023-08-01 15:20:00
SELECT YEAR('2023-08-01'); # 2023
SELECT MONTH('2023-08-01'); # 8
SELECT DAY('2023-08-01'); # 1
SELECT HOUR('15:20:00'); # 15
SELECT MINUTE('15:20:00'); # 20
SELECT SECOND('15:20:00'); # 0
SELECT DATE_ADD('2023-08-01', INTERVAL 1 DAY); # 2023-08-02
SELECT DATE_SUB('2023-08-01', INTERVAL 1 DAY); # 2023-07-31
SELECT DATEDIFF('2023-08-01', '2023-07-31'); # 1
SELECT DATE_FORMAT('2023-08-01', '%Y年%m月%d日'); # 2023年08月01日
SELECT DATE_FORMAT('2023-08-01', '%Y-%m-%d %H:%i:%s'); # 2023-08-01 15:20:00

# 查询所有员工的入职天数
SELECT name, DATEDIFF(CURDATE(), entry_date) as entry_days from user ORDER BY entry_days desc;
```


## 流程函数

```bash
# 流程函数
IF(expr, v1, v2) # 如果expr为true，返回v1，否则返回v2
IFNULL(expr, v) # 如果expr为null，返回v，否则返回expr
CASE expr WHEN v1 THEN r1 WHEN v2 THEN r2 ELSE rn END # 如果expr等于v1，返回r1，否则如果等于v2，返回r2，否则返回rn
CASE WHEN expr1 THEN r1 WHEN expr2 THEN r2 ELSE rn END # 如果expr1为true，返回r1，否则如果expr2为true，返回r2，否则返回rn

# 举例
SELECT IF(1 > 2, '大于', '小于等于'); # 小于等于
SELECT IFNULL(NULL, '默认值'); # 默认值
SELECT CASE 1 WHEN 1 THEN '一' WHEN 2 THEN '二' ELSE '其他' END; # 一
SELECT CASE WHEN 1 > 2 THEN '大于' WHEN 1 < 2 THEN '小于' ELSE '等于' END; # 小于

SELECT
  name.
  CASE work_no WHEN '北京' THEN '一线城市' WHEN '上海' THEN '二线城市' ELSE '其他城市' END as city
FROM user;

SELECT 
  name,
  IF(math > 80, '及格', '不及格') as math_result,
  IF(english > 80, '及格', '不及格') as english_result,
  IF(computer > 80, '及格', '不及格') as computer_result
FROM user;

SELECT 
  name,
  CASE 
    WHEN math > 80 AND english > 80 AND computer > 80 THEN '优秀'
    WHEN math > 80 AND english > 80 THEN '良好'
    WHEN math > 80 AND computer > 80 THEN '良好'
    WHEN english > 80 AND computer > 80 THEN '良好'
    ELSE '一般'
  END as result
FROM user;
```
