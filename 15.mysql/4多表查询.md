### 多表关系

#### 多对多

```bash
create table student(
    id int primary key auto_increment comment '主键',
    name varchar(20) comment '姓名',
    age int comment '年龄'
) comment '学生表';

insert into student(name, age) values('张三', 18);

create table course(
    id int primary key auto_increment comment '主键',
    name varchar(20) comment '课程名称'
) comment '课程表';

insert into course(name) values('Java');

create table student_course(
    id int primary key auto_increment comment '主键',
    student_id int not null comment '学生id',
    course_id int not null comment '课程id',
    constraint fk_student_id foreign key (student_id) references student(id),
    constraint fk_course_id foreign key (course_id) references course(id)
) comment '学生课程表';

insert into student_course(student_id, course_id) values(1, 1);
```

#### 一对1

```bash
create table tb_user(
    id int primary key auto_increment comment '主键',
    name varchar(20) comment '姓名',
    age int comment '年龄'
) comment '用户表';

create table tb_user_edu(
    id int primary key auto_increment comment '主键',
    edu varchar(20) comment '学历',
    user_id int unique comment '用户id',
    constraint fk_user_id foreign key (user_id) references tb_user(id)
) comment '用户学历表';

insert into tb_user(name, age) values('张三', 18);

insert into tb_user_edu(edu, user_id) values('本科', 1);
```


### 多表查询

```bash
select * from tb_user, tb_user_edu; # 两张表所有的组合情况
select * from tb_user, tb_user_edu where tb_user.id = tb_user_edu.user_id; # 两张表的交集
select * from tb_user, tb_user_edu where tb_user.id <> tb_user_edu.user_id; # 两张表的并集

# 内连接
# 隐式内连接
# select 字段列表 from 表1、表2 where 条件...;
select * from tb_user, tb_user_edu where tb_user.id = tb_user_edu.user_id;
select * from tb_user u, tb_user_edu e where u.id = e.user_id;

# 显示内连接
# select 字段列表 from 表1 inner join 表2 on 条件...;
select * from tb_user inner join tb_user_edu on tb_user.id = tb_user_edu.user_id;

# 左外连接
# select 字段列表 from 表1 left outer join 表2 on 条件...;
select * from tb_user left outer join tb_user_edu on tb_user.id = tb_user_edu.user_id;

# 右外连接
# select 字段列表 from 表1 right outer join 表2 on 条件...;
select * from tb_user right outer join tb_user_edu on tb_user.id = tb_user_edu.user_id;

# 全外连接
# select 字段列表 from 表1 full outer join 表2 on 条件...;
select * from tb_user full outer join tb_user_edu on tb_user.id = tb_user_edu.user_id;

# 自连接
# select 字段列表 from 表1 别名1 join 表1 别名2 on 条件...;
select * from tb_user u1 join tb_user u2 on u1.id = u2.id;

# 自连接查询用户的姓名及其所属领导名字
select u1.name, u2.name from tb_user u1 join tb_user u2 on u1.id = u2.manager_id;
```


### 联合查询

```bash
# union、union all 联合查询
# union 去重
# union all 不去重
select 字段列表 from 表1
union all
select 字段列表 from 表2;
```
